# {{ ansible_managed }}
# MariaDB performance configuration

[mysqld]
# Connection and thread settings
max_connections = {{ max_connections }}
thread_cache_size = {{ thread_cache_size }}
table_open_cache = {{ table_open_cache }}
max_allowed_packet = 16M

# Query cache settings
query_cache_type = 1
query_cache_size = {{ query_cache_size }}
query_cache_limit = 2M

# Temp tables
tmp_table_size = 64M
max_heap_table_size = 64M

# Handler and buffer settings
join_buffer_size = 4M
sort_buffer_size = 4M
read_buffer_size = 2M
read_rnd_buffer_size = 4M

# Query execution
low_priority_updates = 1
concurrent_insert = 2